<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY radeon-wiki "http://wiki.x.org/wiki/RadeonFeature">
  <!ENTITY radeon-marketing-names "&radeon-wiki;#Decoder_ring_for_engineering_vs_marketing_names">

  <!ENTITY xorg-ati-driver-version "7.5.0">

  <!ENTITY xorg-ati-driver-download-http "&xorg-download-http;/driver/xf86-video-ati-&xorg-ati-driver-version;.tar.bz2">
  <!ENTITY xorg-ati-driver-download-ftp  "&xorg-download-ftp;/driver/xf86-video-ati-&xorg-ati-driver-version;.tar.bz2">
  <!ENTITY xorg-ati-driver-md5sum        "29654190e37310b87e44a14c229967ee">
  <!ENTITY xorg-ati-driver-size          "791 KB">
  <!ENTITY xorg-ati-driver-buildsize     "17 MB">
  <!ENTITY xorg-ati-driver-time          "0.2 SBU">
]>

  <!-- Begin Xorg ATI Driver -->
  <sect2 id="xorg-ati-driver" xreflabel="Xorg ATI Driver-&xorg-ati-driver-version;">

    <title>Xorg ATI Driver-&xorg-ati-driver-version;</title>

    <indexterm zone="xorg-ati-driver">
      <primary sortas="a-xorg-ati-driver">xorg-ati-driver</primary>
    </indexterm>

    <sect3 role="package">
      <title>Introduction to Xorg ATI Driver</title>

      <para>
        The <application>Xorg ATI Driver</application> package contains the X.Org
        Video Driver for ATI Radeon video cards including all chipsets ranging
        from R100 to R900 and the newer RAxx chipsets.
      </para>

      &lfs76_checked;

      <note>
        <para>
          For Direct Rendering to work with newer Radeon Cards (R300 and later chipsets),
          you need to enable the r300, r600 and radeonsi Gallium drivers at
          <xref linkend="mesalib"/> build time. Also, some cards require Firmware to be
          available when the kernel driver is loaded. Firmware can be obtained from
          <ulink url="http://people.freedesktop.org/~agd5f/radeon_ucode/">
          this</ulink> site. See "Kernel Configuration for additional firmware" below.
        </para>
      </note>

      <bridgehead renderas="sect4">Package Information</bridgehead>
      <itemizedlist spacing="compact">
        <listitem>
          <para>
            Download (HTTP): <ulink url="&xorg-ati-driver-download-http;"/>
          </para>
        </listitem>
        <listitem>
          <para>
            Download (FTP): <ulink url="&xorg-ati-driver-download-ftp;"/>
          </para>
        </listitem>
        <listitem>
          <para>
            Download MD5 sum: &xorg-ati-driver-md5sum;
          </para>
        </listitem>
        <listitem>
          <para>
            Download size: &xorg-ati-driver-size;
          </para>
        </listitem>
        <listitem>
          <para>
            Estimated disk space required: &xorg-ati-driver-buildsize;
          </para>
        </listitem>
        <listitem>
          <para>
            Estimated build time: &xorg-ati-driver-time;
          </para>
        </listitem>
      </itemizedlist>

      <bridgehead renderas="sect4">Xorg ATI Driver Dependencies</bridgehead>

      <bridgehead renderas="sect5">Required</bridgehead>
      <para role="required">
        <xref linkend="xorg-server"/> (recommended to be built with glamor enabled)
      </para>

      <note>
        <para>
          Glamor is <emphasis>required for "Southern Islands" and later
          GPUs</emphasis> but optional for R300 to R700, Evergreen and
          "Northern Islands" GPUs - see the link under "Glamor
          Acceleration" below.
        </para>
      </note>

      <para condition="html" role="usernotes">
        User Notes: <ulink url="&blfs-wiki;/xorg-ati-driver"/>
      </para>
    </sect3>

    <sect3 role="kernel" id="xorg-ati-driver-kernel">
      <title>Kernel Configuration</title>

      <para>
        Enable the following options in the kernel configuration and recompile the
        kernel if necessary:
      </para>

<screen><literal>Device Drivers  ---&gt;
  Graphics support ---&gt;
    ATI Radeon: Y or M</literal></screen>

      <indexterm zone="xorg-ati-driver xorg-ati-driver-kernel">
        <primary sortas="d-xorg-ati-driver">xorg-ati-driver</primary>
      </indexterm>
    </sect3>

    <sect3 role="kernel" id="xorg-ati-firmware-kernel">
      <title>Kernel Configuration for additional firmware</title>

      <para>
        If you need to add firmware, install the file(s) and then point to them in the
        kernel configuration and recompile the kernel if necessary. To find out which
        firmware you need, consult the <ulink url="&radeon-marketing-names;">
        Decoder ring for engineering vs marketing names</ulink>. Download any firmware
        for your card which is named like:
        <filename><replaceable>&lt;ENGINEERING_NAME&gt;</replaceable>_rlc.bin</filename>,
        etc. Note that for R600 and R700 family, generic
        <filename>R600_rlc.bin</filename> and <filename>R700_rlc.bin</filename> are
        necessary in adition to the model specific firmware, while for later generations
        (Evergreen, "Northern Islands" and probably "Southern Islands") you need the
        <filename>BTC_rlc.bin</filename> in adition to the model specific firmware.
        Below is an example for Radeon HD6470, which is "Northern Islands" GPU with a
        network card that also requires the firmware:
      </para>

<screen><literal>CONFIG_EXTRA_FIRMWARE="radeon/BTC_rlc.bin radeon/CAICOS_mc.bin radeon/CAICOS_me.bin
radeon/CAICOS_pfp.bin radeon/CAICOS_smc.bin rtl_nic/rtl8168e-3.fw"
CONFIG_EXTRA_FIRMWARE_DIR="/lib/firmware"</literal></screen>

     <note>
       <para>
         CONFIG_EXTRA_FIRMWARE should all be on one line. It
         is shown above as two lines for presentation only.
       </para>
     </note>

      <tip>
        <para>
          You can check <command>dmesg</command> output after boot to see which firmware
          is missing.
        </para>
      </tip>

      <indexterm zone="xorg-ati-driver xorg-ati-firmware-kernel">
        <primary sortas="d-xorg-ati-firmware">xorg-ati-firmware</primary>
      </indexterm>
    </sect3>

    <sect3 role="installation">
      <title>Installation of Xorg ATI Driver</title>

      <para>
        Install <application>Xorg ATI Driver</application> by running the following
        commands:
      </para>

<screen><userinput>./configure $XORG_CONFIG &amp;&amp;
make</userinput></screen>

      <para>
        This package does not come with a test suite.
      </para>

      <para>
        Now, as the <systemitem class="username">root</systemitem> user:
      </para>

<screen role="root"><userinput>make install</userinput></screen>
    </sect3>

    <sect3>
      <title>Glamor Acceleration</title>

      <para>
        Glamor is an acceleration library which uses cards' 3D capabilities
        to accelerate 2D rendering. Glamor acceleration is required for
        Radeon "Southern Islands" GPUs which use "radeonsi" Gallium3D driver
        from <xref linkend="mesalib"/>. To see which cards fall under
        "Southern Islands" category, read the
        <ulink url="&radeon-marketing-names;">
        Decoder ring for engineering vs marketing names</ulink>. Please note
        that Glamor acceleration can be used with other chips as well, from the
        R300 onwards, but it has not been tested recently.
      </para>

      <para>
        Glamor acceleration is not enabled by default for chipsets that don't
        use "radeonsi" Gallium3D driver. You have to use a
        <filename>xorg.conf</filename> file to enable it. To enable
        Glamor for cards other than "Southern Islands" and later, create the
        following <filename>/etc/X11/xorg.conf</filename> as the
        <systemitem class="username">root</systemitem> user:
      </para>

<screen role="root"><userinput>cat &gt;&gt; /etc/X11/xorg.conf &lt;&lt; "EOF"
<literal>Section "Module"
        Load "dri2"
        Load "glamoregl"
EndSection

Section "Device"
        Identifier "radeon"
        Driver "radeon"
        Option "AccelMethod" "glamor"
EndSection</literal>
EOF</userinput></screen>

    </sect3>

    <sect3 role="content">
      <title>Contents</title>

      <segmentedlist>
        <segtitle>Installed Xorg Drivers</segtitle>

        <seglistitem>
          <seg>
            ati_drv.so and radeon_drv.so
          </seg>
        </seglistitem>
      </segmentedlist>

      <variablelist>
        <bridgehead renderas="sect4">Short Descriptions</bridgehead>
        <?dbfo list-presentation="list"?>
        <?dbhtml list-presentation="table"?>

        <varlistentry id="ati_drv">
          <term><filename class="libraryfile">ati_drv.so</filename></term>
          <listitem>
            <para>
              is a wrapper driver for ATI video cards that autodetects ATI
              video hardware and loads radeon, mach64 or r128 driver.
            </para>
            <indexterm zone="xorg-ati-driver ati_drv">
              <primary sortas="c-ati_drv">ati_drv.so</primary>
            </indexterm>
          </listitem>
        </varlistentry>

        <varlistentry id="radeon_drv">
          <term><filename class="libraryfile">radeon_drv.so</filename></term>
          <listitem>
            <para>
              is an Xorg video driver for ATI Radeon based video cards.
            </para>
            <indexterm zone="xorg-ati-driver radeon_drv">
              <primary sortas="c-radeon_drv">radeon_drv.so</primary>
            </indexterm>
          </listitem>
        </varlistentry>

      </variablelist>

    </sect3>

  </sect2>
  <!-- End Xorg ATI Driver -->
